@page "/"
@inject NavigationManager Nav
@layout BlankLayout

<div class="master-viewport">

    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;">
        <defs>
            <filter id="cloud-fluff">
                <feGaussianBlur in="SourceGraphic" stdDeviation="12" />
                <feColorMatrix type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9" />
            </filter>

            <filter id="glare">
                <feGaussianBlur stdDeviation="3" result="coloredBlur" />
                <feMerge>
                    <feMergeNode in="coloredBlur" />
                    <feMergeNode in="SourceGraphic" />
                </feMerge>
            </filter>

            <linearGradient id="beam-grad" x1="100%" y1="0%" x2="0%" y2="0%">
                <stop offset="0%" stop-color="rgba(254, 240, 138, 0.8)" />
                <stop offset="100%" stop-color="rgba(254, 240, 138, 0)" />
            </linearGradient>
            <linearGradient id="plane-belly-blue" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" stop-color="#38bdf8" />
                <stop offset="100%" stop-color="#0284c7" />
            </linearGradient>
            <linearGradient id="bullet-chrome" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#e2e8f0" />
                <stop offset="50%" stop-color="#ffffff" />
                <stop offset="100%" stop-color="#cbd5e1" />
            </linearGradient>
        </defs>
    </svg>

    <div class="sky-layer">
        <div class="sky-gradient"></div>
        <div class="moon-container">
            <svg viewBox="0 0 100 100" class="crescent-moon">
                <path d="M70 10 A 45 45 0 1 0 70 90 A 35 35 0 1 1 70 10 Z" fill="#fdf4ff" />
            </svg>
        </div>
        <div class="stars-container">
            @for (int i = 0; i < 120; i++)
            {
                var speedClass = Rnd.NextDouble() > 0.5 ? "star-fast" : "star-slow";
                var size = Rnd.Next(1, 3) + "px";
                <div class="star @speedClass"
                     style="top:@(Rnd.Next(0, 70))%; left:@(Rnd.Next(0, 100))%;
                                    width:@size; height:@size;
                                    animation-delay:@(Rnd.NextDouble() * 4)s;">
                </div>
            }
        </div>
    </div>

    <div class="atmosphere-layer">
        <div class="cloud-mass c1"></div>
        <div class="cloud-mass c2"></div>
        <div class="cloud-mass c3"></div>
        <div class="cloud-mass c4"></div>
        <div class="cloud-mass c5"></div>
    </div>

    <div class="aviation-layer">
        <div class="aircraft-container flight-path-1">
            <svg class="plane-svg" viewBox="0 0 600 200">
                <g filter="drop-shadow(0 20px 30px rgba(0,0,0,0.3))">
                    <path d="M310,95 L360,60 L440,60 L400,95 Z" fill="#64748b" /> <path d="M100,20 L60,80 L130,80 L150,20 Z" fill="#cbd5e1" /> <path d="M550,100 L50,100 Q30,100 30,90 Q30,70 60,70 L550,80 Q590,85 590,92 Q590,100 550,100 Z" fill="#cbd5e1" /> <path d="M550,100 L50,100 Q30,100 30,110 Q30,125 60,125 L400,125 Q450,125 500,115 Q540,105 550,100 Z" fill="url(#plane-belly-blue)" /> <path d="M535,85 L570,88 Q580,90 570,98 L535,95 Z" fill="#0f172a" /> <g fill="#0f172a">
                        @for (int x = 150; x <= 450; x += 30)
                        {
                            <circle cx="@x" cy="90" r="5" />
                        }
                    </g> <path d="M300,100 L340,140 L460,140 L400,100 Z" fill="#cbd5e1" /> <path d="M320,130 L340,140 L460,140 L420,130 Z" fill="#0284c7" opacity="0.4" /> <path d="M360,140 L360,150 L400,150 L400,140 Z" fill="#475569" /> <ellipse cx="380" cy="155" rx="20" ry="8" fill="#334155" />
                </g>
            </svg>
        </div>
    </div>

    <div class="railway-layer">

        <div class="track-lane track-high">
            <svg class="bullet-train" viewBox="0 0 1600 150">
                <path d="M300,50 L0,60 L0,80 L300,90" fill="#3b82f6" filter="blur(15px)" opacity="0.8">
                    <animate attributeName="opacity" values="0.8;0.4;0.8" dur="0.1s" repeatCount="indefinite" />
                </path>
                <path d="M1500,90 L100,90 L100,40 L1350,40 Q1550,40 1580,90 Z" fill="url(#bullet-chrome)" filter="drop-shadow(0 10px 15px rgba(0,0,0,0.3))" />
                <path d="M1350,45 L1500,50 L1480,65 L1350,65 Z" fill="#0f172a" />
                <rect x="100" y="80" width="1400" height="8" fill="#0ea5e9" />
                <g fill="#1e293b">
                    @for (int i = 200; i < 1300; i += 100)
                    {
                        <rect x="@i" y="50" width="60" height="20" rx="4" />
                    }
                </g>
            </svg>
        </div>

        <div class="track-lane track-low">
            <svg class="classic-train" viewBox="0 0 1600 250">
                <g transform="translate(0, 20)">
                    <path d="M50,110 L20,140 L50,140 Z" fill="#dc2626" />
                    <circle cx="50" cy="70" r="12" fill="#fef08a" filter="url(#glare)" />
                    <path d="M50,70 L-400,-20 L-400,160 Z" fill="url(#beam-grad)" style="mix-blend-mode: screen;" />
                    <rect x="50" y="50" width="200" height="90" fill="#334155" />
                    <rect x="50" y="50" width="200" height="45" fill="#475569" />
                    <rect x="80" y="10" width="40" height="40" fill="#0f172a" />
                    <rect x="75" y="5" width="50" height="5" fill="#0f172a" />
                    <g class="smoke-system">
                        @for (int s = 0; s < 15; s++)
                        {
                            <circle cx="100" cy="5" r="@(12 + s)" fill="#cbd5e1" opacity="0.6" class="smoke-particle" style="animation-delay: @(s * 0.4)s" />
                        }
                    </g>
                    <rect x="250" y="30" width="100" height="110" fill="#1e293b" />
                    <rect x="260" y="40" width="40" height="40" fill="#fbbf24" opacity="0.8" />
                    <rect x="240" y="25" width="120" height="5" fill="#0f172a" />
                    <rect x="350" y="80" width="120" height="60" fill="#334155" />
                    <polygon points="350,80 410,60 470,80 470,140 350,140" fill="#475569" />
                    <rect x="360" y="90" width="30" height="30" fill="#fbbf24" opacity="0.7" />
                    <rect x="400" y="90" width="30" height="30" fill="#fbbf24" opacity="0.7" />
                    <rect x="50" y="140" width="420" height="10" fill="#111" />
                    <g>
                        <circle cx="100" cy="150" r="28" fill="#111" />
                        <g class="wheel-counter">
                            <circle cx="100" cy="150" r="27" fill="none" stroke="#fff" stroke-width="2" />
                            <line x1="73" y1="150" x2="127" y2="150" stroke="#fff" stroke-width="2" />
                            <line x1="100" y1="123" x2="100" y2="177" stroke="#fff" stroke-width="2" />
                        </g>
                        <circle cx="180" cy="150" r="28" fill="#111" />
                        <g class="wheel-counter">
                            <circle cx="180" cy="150" r="27" fill="none" stroke="#fff" stroke-width="2" />
                            <line x1="153" y1="150" x2="207" y2="150" stroke="#fff" stroke-width="2" />
                            <line x1="180" y1="123" x2="180" y2="177" stroke="#fff" stroke-width="2" />
                        </g>
                        <circle cx="260" cy="150" r="28" fill="#111" />
                        <g class="wheel-counter">
                            <circle cx="260" cy="150" r="27" fill="none" stroke="#fff" stroke-width="2" />
                            <line x1="233" y1="150" x2="287" y2="150" stroke="#fff" stroke-width="2" />
                            <line x1="260" y1="123" x2="260" y2="177" stroke="#fff" stroke-width="2" />
                        </g>
                    </g>
                    <rect x="100" y="155" width="160" height="8" fill="#94a3b8" class="drive-rod" />
                </g>

                <g transform="translate(370, 100)">
                    <rect x="0" y="0" width="180" height="70" fill="#334155" />
                    <polygon points="0,0 90,20 180,0 180,70 0,70" fill="#475569" />
                    <rect x="20" y="20" width="35" height="35" fill="#fbbf24" opacity="0.8" />
                    <rect x="125" y="20" width="35" height="35" fill="#fbbf24" opacity="0.8" />
                    <rect x="0" y="70" width="180" height="10" fill="#111" />
                    <g>
                        <circle cx="45" cy="80" r="22" fill="#111" />
                        <g class="wheel-counter"><circle cx="45" cy="80" r="21" fill="none" stroke="#fff" stroke-width="1.5" /><line x1="24" y1="80" x2="66" y2="80" stroke="#fff" stroke-width="1.5" /><line x1="45" y1="59" x2="45" y2="101" stroke="#fff" stroke-width="1.5" /></g>
                        <circle cx="135" cy="80" r="22" fill="#111" />
                        <g class="wheel-counter"><circle cx="135" cy="80" r="21" fill="none" stroke="#fff" stroke-width="1.5" /><line x1="114" y1="80" x2="156" y2="80" stroke="#fff" stroke-width="1.5" /><line x1="135" y1="59" x2="135" y2="101" stroke="#fff" stroke-width="1.5" /></g>
                    </g>
                </g>

                <g transform="translate(550, 100)">
                    <rect x="0" y="0" width="200" height="70" fill="#7c2d12" stroke="#451a03" stroke-width="3" />
                    <line x1="100" y1="0" x2="100" y2="70" stroke="#451a03" stroke-width="3" />
                    <line x1="0" y1="0" x2="200" y2="70" stroke="#451a03" stroke-width="1.5" opacity="0.4" />
                    <line x1="0" y1="70" x2="200" y2="0" stroke="#451a03" stroke-width="1.5" opacity="0.4" />
                    <rect x="0" y="70" width="200" height="10" fill="#111" />
                    <g>
                        <circle cx="50" cy="80" r="22" fill="#111" />
                        <g class="wheel-counter"><circle cx="50" cy="80" r="21" fill="none" stroke="#fff" stroke-width="1.5" /><line x1="29" y1="80" x2="71" y2="80" stroke="#fff" stroke-width="1.5" /><line x1="50" y1="59" x2="50" y2="101" stroke="#fff" stroke-width="1.5" /></g>
                        <circle cx="150" cy="80" r="22" fill="#111" />
                        <g class="wheel-counter"><circle cx="150" cy="80" r="21" fill="none" stroke="#fff" stroke-width="1.5" /><line x1="129" y1="80" x2="171" y2="80" stroke="#fff" stroke-width="1.5" /><line x1="150" y1="59" x2="150" y2="101" stroke="#fff" stroke-width="1.5" /></g>
                    </g>
                </g>
            </svg>
        </div>
    </div>

    <div class="interface-layer">
        <div class="glass-panel">
            <div class="panel-glow"></div>
            <div class="panel-content">
                <h1 class="brand-title">PathFusion</h1>
                <p class="brand-tag">Intelligent Route Optimization</p>
                <div class="brand-divider"></div>
                <p class="brand-desc">
                    Orchestrating Pakistan's movement. Experience synchronized travel across road, rail, and air ecosystems.
                </p>

                <button class="primary-btn" @onclick="EnterApp">
                    <span class="btn-content">ENTER</span>
                    <span class="btn-arrow">→</span>
                </button>

            </div>
        </div>
    </div>

    <div class="highway-layer">
        <div class="asphalt"><div class="line-dashed"></div><div class="line-solid"></div></div>
        <div class="lane lane-right">
            <div class="vehicle-wrapper car-sedan">
                <svg viewBox="0 0 200 80">
                    <path d="M10,40 L170,40 Q180,40 180,50 L180,65 L10,65 Q0,65 0,55 L0,50 Q0,40 10,40 Z" fill="#b91c1c" />
                    <path d="M30,40 L50,15 L130,15 L150,40 Z" fill="#1e293b" />
                    <g class="tire-group"><circle cx="35" cy="65" r="12" fill="#111" /><g class="wheel-spin"><circle cx="35" cy="65" r="11" fill="none" stroke="#fff" stroke-width="2" /><line x1="24" y1="65" x2="46" y2="65" stroke="#fff" stroke-width="2" /><line x1="35" y1="54" x2="35" y2="76" stroke="#fff" stroke-width="2" /></g></g>
                    <g class="tire-group"><circle cx="145" cy="65" r="12" fill="#111" /><g class="wheel-spin"><circle cx="145" cy="65" r="11" fill="none" stroke="#fff" stroke-width="2" /><line x1="134" y1="65" x2="156" y2="65" stroke="#fff" stroke-width="2" /><line x1="145" y1="54" x2="145" y2="76" stroke="#fff" stroke-width="2" /></g></g>
                </svg>
            </div>

            <div class="vehicle-wrapper car-truck">
                <svg viewBox="0 0 260 110">
                    <rect x="190" y="20" width="60" height="60" rx="4" fill="#d97706" />
                    <rect x="10" y="10" width="170" height="70" rx="2" fill="#f8fafc" stroke="#94a3b8" stroke-width="2" />
                    <text x="30" y="50" font-family="Arial" font-weight="900" font-size="14" fill="#94a3b8" letter-spacing="2">LOGISTICS</text>
                    <g class="tire-group"><circle cx="40" cy="80" r="14" fill="#111" /><g class="wheel-spin"><circle cx="40" cy="80" r="13" fill="none" stroke="#fff" stroke-width="2" /><line x1="27" y1="80" x2="53" y2="80" stroke="#fff" stroke-width="2" /><line x1="40" y1="67" x2="40" y2="93" stroke="#fff" stroke-width="2" /></g></g>
                    <g class="tire-group"><circle cx="90" cy="80" r="14" fill="#111" /><g class="wheel-spin"><circle cx="90" cy="80" r="13" fill="none" stroke="#fff" stroke-width="2" /><line x1="77" y1="80" x2="103" y2="80" stroke="#fff" stroke-width="2" /><line x1="90" y1="67" x2="90" y2="93" stroke="#fff" stroke-width="2" /></g></g>
                    <g class="tire-group"><circle cx="220" cy="80" r="14" fill="#111" /><g class="wheel-spin"><circle cx="220" cy="80" r="13" fill="none" stroke="#fff" stroke-width="2" /><line x1="207" y1="80" x2="233" y2="80" stroke="#fff" stroke-width="2" /><line x1="220" y1="67" x2="220" y2="93" stroke="#fff" stroke-width="2" /></g></g>
                </svg>
            </div>
        </div>

        <div class="lane lane-left">
            <div class="vehicle-wrapper car-suv">
                <svg viewBox="0 0 220 90">
                    <path d="M10,35 L200,35 Q210,35 210,50 L210,70 L10,70 Q0,70 0,50 Z" fill="#1e3a8a" />
                    <path d="M30,35 L60,10 L160,10 L190,35 Z" fill="#0f172a" />
                    <g class="tire-group"><circle cx="45" cy="70" r="14" fill="#111" /><g class="wheel-spin"><circle cx="45" cy="70" r="13" fill="none" stroke="#fff" stroke-width="2" /><line x1="32" y1="70" x2="58" y2="70" stroke="#fff" stroke-width="2" /><line x1="45" y1="57" x2="45" y2="83" stroke="#fff" stroke-width="2" /></g></g>
                    <g class="tire-group"><circle cx="170" cy="70" r="14" fill="#111" /><g class="wheel-spin"><circle cx="170" cy="70" r="13" fill="none" stroke="#fff" stroke-width="2" /><line x1="157" y1="70" x2="183" y2="70" stroke="#fff" stroke-width="2" /><line x1="170" y1="57" x2="170" y2="83" stroke="#fff" stroke-width="2" /></g></g>
                </svg>
            </div>
        </div>
    </div>
</div>

@code {
    private static readonly Random Rnd = new Random();

    private async Task EnterApp()
    {
        await Task.Delay(300);
        Nav.NavigateTo("/map");
    }
}
